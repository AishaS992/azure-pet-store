trigger:
  branches:
    include:
    - main
  paths:
    include:
    - petstore/petstoredataops/*

resources:
- repo: self

pool:
  vmImage: ubuntu-latest

stages:
- stage: Build
  displayName: Build stage
  jobs: 
    - job: Build
      steps:
      - task: PublishBuildArtifacts@1
        inputs:
          PathtoPublish: 'petstore/petstoredataops/PetStoreNotebook.py'
          ArtifactName: 'workbook'
          PublishLocation: 'Container'       
- stage: Deploy
  displayName: Deploy Stage
  dependsOn: Build
  jobs:
    - job: Deploy
      steps:
      - task: configuredatabricks@0
        inputs:
          url: 'https://adb-5501209530448281.1.azuredatabricks.net/'
          token: '- task: configuredatabricks@0   inputs:     url: ''https://adb-5501209530448281.1.azuredatabricks.net/''     token: ''dapi525583a773f6477b0e697781034c1068-3'''
      - task: deploynotebooks@0
        inputs:
          notebooksFolderPath: 'Container'
          workspaceFolder: '/prod'