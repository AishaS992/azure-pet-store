trigger:
  branches:
    include:
    - main
  paths:
    include:
    - petstore/petstoredataops/*

resources:
- repo: self

pool:
  vmImage: ubuntu-latest

stages:
- stage: Build
  displayName: Build stage
  jobs: 
    - job: Build
      steps:
      - task: PublishBuildArtifacts@1
        inputs:
          PathtoPublish: 'petstore/petstoredataops/PetStoreNotebook.py'
          ArtifactName: 'workbook'
          PublishLocation: 'Container'       
- stage: Deploy
  displayName: Deploy Stage
  dependsOn: Build
  jobs:
    - job: Deploy
      steps:
      - task: deploynotebooks@0
        inputs:
          notebooksFolderPath: 'Container'
          workspaceFolder: '/prod'