<!doctype html>
<html lang="en">

<head lang="en" th:replace="fragments/head :: head"></head>

<body>
	<div lang="en" th:replace="fragments/header :: header"></div>
	<div class="pricing-header px-3 py-3 pt-md-5 pb-md-4 mx-auto text-center">
		<h1 class="display-4">
			Shopping Cart Summary
		</h1>
		<div style=" display: flex;justify-content: center;">
			<table class="table table-borderless" style="width:80%;align-self: center;">
			<th class="fullTable">Product ID</th><th>Thumbnail</th><th class="fullTable">Product Name</th><th>Quantity</th>
			<div th:if="${order} != null and ${order.products} != null">
				<tr th:each="product, iStat : ${order.products}">
					<td class="fullTable">
						<span th:text="${product.id}" />
					</td>
					<td>
						<figure> <img class="thumbnail" th:src="@{${product.photoURL}}" /> </figure>
					</td>
					<td class="fullTable">
						<span th:text="${product.name}" />
					</td>
					<td>
						<div>
						<a th:onclick="'updatecart(\'' + ${product.id} + '\' , \'minus\');'" style="font-weight: bold; text-decoration: none; color: black;"> 
							<button class="btn btn-outline-primary" type="submit">-</button>
						</a><span style="float:inherit;" th:text="${product.quantity}" />
						<a th:onclick="'updatecart(\'' + ${product.id} + '\' , \'plus\');'" style="font-weight: bold; text-decoration: none; color: black;"> 
							<button class="btn btn-outline-primary" type="submit">+</button>
						</a>
						</div>
					</td>
				</tr>
			</div>
			</table>
		</div>	
		<form action="updatecart" method="post" id="updateProduct">
		 <input type="hidden" id="productId" name="productId" value="">
		 <input type="hidden" id="operator" name="operator" value="">
    	</form>
	</div>
	<div lang="en" th:replace="fragments/footer :: footer"></div>
	  <script language="javascript"> 
	   function updatecart(productId, operator){
		  console.log(productId);
		  document.getElementById('productId').value = productId;
		  document.getElementById('operator').value = operator;
	      document.getElementById('updateProduct').submit();
	   }
	</script>
</body>

</html>